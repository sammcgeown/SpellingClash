{{define "kid_dashboard.tmpl"}}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Title}}</title>
    <link rel="stylesheet" href="/static/css/styles.css">
    <script src="/static/js/htmx.min.js"></script>
    <link rel="icon" type="image/png" href="/static/favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/static/favicon/favicon.svg" />
    <link rel="shortcut icon" href="/static/favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/static/favicon/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="SpellingClash" />
    <link rel="manifest" href="/static/favicon/site.webmanifest" />
</head>
<body>
    <div class="container">
        <div class="kid-dashboard">
            <header class="kid-header">
                <div class="kid-profile">
                    <div class="kid-avatar-large" style="background-color: {{.Kid.AvatarColor}}">
                        {{slice .Kid.Name 0 1}}
                    </div>
                    <h1>Hi, {{.Kid.Name}}!</h1>
                </div>
                <form method="POST" action="/kid/logout">
                    <button type="submit" class="btn btn-secondary">Switch Kid</button>
                </form>
            </header>

            <main class="kid-main">
                <div class="kid-stats">
                    <div class="stat-card">
                        <div class="stat-icon">‚≠ê</div>
                        <div class="stat-info">
                            <h3>{{.TotalPoints}}</h3>
                            <p>Total Points</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìö</div>
                        <div class="stat-info">
                            <h3>{{len .AssignedLists}}</h3>
                            <p>Spelling Lists</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üéØ</div>
                        <div class="stat-info">
                            <h3>{{.TotalSessions}}</h3>
                            <p>Sessions</p>
                        </div>
                    </div>
                </div>

                {{if .AssignedLists}}
                <section class="kid-section">
                    <h2>Your Spelling Lists</h2>
                    <div class="kid-lists-grid">
                        {{range .AssignedLists}}
                        <div class="kid-list-card">
                            <h3>{{.Name}}</h3>
                            {{if .Description}}
                            <p class="list-description">{{.Description}}</p>
                            {{end}}
                            <div class="list-actions">
                                <form method="POST" action="/kid/practice/start/{{.ID}}">
                                    <button type="submit" class="btn btn-primary">üìù Practice</button>
                                </form>
                                <form method="POST" action="/kid/hangman/start/{{.ID}}">
                                    <button type="submit" class="btn btn-secondary">üéÆ Hangman</button>
                                </form>
                                <form method="POST" action="/kid/missing-letter/start/{{.ID}}">
                                    <button type="submit" class="btn btn-accent">üî§ Missing Letters</button>
                                </form>
                            </div>
                        </div>
                        {{end}}
                    </div>
                </section>
                {{else}}
                <div class="empty-state">
                    <h2>No spelling lists yet</h2>
                    <p>Ask your parent to assign you some spelling lists to practice!</p>
                </div>
                {{end}}

                {{if .RecentSessions}}
                <section class="kid-section">
                    <h2>Recent Practice</h2>
                    <div class="recent-sessions">
                        {{range .RecentSessions}}
                        <div class="session-item">
                            <div class="session-info">
                                <span class="session-date">{{.StartedAt.Format "Jan 2, 3:04 PM"}}</span>
                                <span class="session-score">{{.CorrectWords}}/{{.TotalWords}} correct</span>
                            </div>
                            <div class="session-points">+{{.PointsEarned}} points</div>
                        </div>
                        {{end}}
                    </div>
                </section>
                {{end}}
            </main>
        </div>
    </div>
</body>
</html>
{{end}}
